<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.kdcrm.mapper.SystemUserinfoMapper" >
  <resultMap id="BaseResultMap" type="cn.kdcrm.pojo.SystemUserinfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis GeSELECT count(0) FROM SYSTEM_USERINFO nerator, do not modify.
    -->
    <id column="USERINFO_UID" jdbcType="VARCHAR" property="userinfoUid" />
    <result column="USERINFO_LOGINID" jdbcType="VARCHAR" property="userinfoLoginid" />
    <result column="USERINFO_NAME" jdbcType="VARCHAR" property="userinfoName" />
    <result column="USERINFO_PASSWORD" jdbcType="VARCHAR" property="userinfoPassword" />
    <result column="USERINFO_SEX" jdbcType="CHAR" property="userinfoSex" />
    <result column="USERINFO_EMAIL" jdbcType="VARCHAR" property="userinfoEmail" />
    <result column="USERINFO_MOBILE" jdbcType="VARCHAR" property="userinfoMobile" />
    <result column="USERINFO_STATUS" jdbcType="DECIMAL" property="userinfoStatus" />
    <result column="ROLE_ID" jdbcType="VARCHAR" property="roleId" />
    <association property="systemRole" javaType="cn.kdcrm.pojo.SystemRole">
      <id property="roleId" column="role_id"/>
      <result property="roleName" column="role_name"/>
    </association>
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from SYSTEM_USERINFO
    where USERINFO_UID = #{userinfoUid,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="cn.kdcrm.pojo.SystemUserinfo">
    <selectKey keyProperty="userinfoUid" keyColumn="USERINFO_UID" resultType="java.lang.String" order="BEFORE">
      select seq_user_id.nextval from dual
    </selectKey>
    insert into SYSTEM_USERINFO (USERINFO_UID, USERINFO_LOGINID, USERINFO_NAME,
    USERINFO_PASSWORD, USERINFO_SEX, USERINFO_EMAIL,
    USERINFO_MOBILE, USERINFO_STATUS, ROLE_ID
    )
    values (#{userinfoUid,jdbcType=VARCHAR}, #{userinfoLoginid,jdbcType=VARCHAR}, #{userinfoName,jdbcType=VARCHAR},
    #{userinfoPassword,jdbcType=VARCHAR}, #{userinfoSex,jdbcType=CHAR}, #{userinfoEmail,jdbcType=VARCHAR},
    #{userinfoMobile,jdbcType=VARCHAR}, #{userinfoStatus,jdbcType=DECIMAL}, #{roleId,jdbcType=VARCHAR}
    )
  </insert>

  <update id="updateByPrimaryKey" parameterType="cn.kdcrm.pojo.SystemUserinfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update SYSTEM_USERINFO
    <set>
      <if test="userinfoLoginid!=null and userinfoLoginid!=''">
        USERINFO_LOGINID=#{userinfoLoginid},
      </if>
      <if test="userinfoName!=null and userinfoName!=''">
        USERINFO_NAME=#{userinfoName},
      </if>
      <if test="userinfoPassword!=null and userinfoPassword!=''">
        USERINFO_PASSWORD=#{userinfoPassword},
      </if>
      <if test="userinfoSex!=null and userinfoSex!=''">
        USERINFO_SEX=#{userinfoSex},
      </if>
      <if test="userinfoEmail!=null and userinfoEmail!=''">
        USERINFO_EMAIL=#{userinfoEmail},
      </if>
      <if test="userinfoMobile!=null and userinfoMobile!=''">
        USERINFO_MOBILE=#{userinfoMobile},
      </if>
      <if test="userinfoStatus!=null and userinfoStatus!=''">
        USERINFO_STATUS=#{userinfoStatus},
      </if>
      <if test="roleId!=null and roleId!=''">
        ROLE_ID=#{roleId}
      </if>
    </set>
    where USERINFO_UID = #{userinfoUid,jdbcType=VARCHAR}
  </update>

  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select USERINFO_UID, USERINFO_LOGINID, USERINFO_NAME, USERINFO_PASSWORD, USERINFO_SEX,
    USERINFO_EMAIL, USERINFO_MOBILE, USERINFO_STATUS, ROLE_ID
    from SYSTEM_USERINFO
    where USERINFO_UID = #{userinfoUid,jdbcType=VARCHAR}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    select USERINFO_UID, USERINFO_LOGINID, USERINFO_NAME, USERINFO_PASSWORD, USERINFO_SEX,
    USERINFO_EMAIL, USERINFO_MOBILE, USERINFO_STATUS, a.ROLE_ID,b.role_name
    from SYSTEM_USERINFO a,System_Role b where a.role_id=b.role_id

    <if test="userinfoLoginid!=null and userinfoLoginid!=''">
      and USERINFO_LOGINID=#{userinfoLoginid}
    </if>
    <if test="userinfoName!=null and userinfoName!=''">
      and USERINFO_NAME=#{userinfoName}
    </if>
    <if test="userinfoSex!=null and userinfoSex!=''">
      and USERINFO_SEX=#{userinfoSex}
    </if>
    <if test="userinfoEmail!=null and userinfoEmail!=''">
      and USERINFO_EMAIL=#{userinfoEmail}
    </if>
    <if test="userinfoMobile!=null and userinfoMobile!=''">
      and USERINFO_MOBILE=#{userinfoMobile}
    </if>
    <if test="roleId!=null and roleId!=''">
      and a.role_Id=#{roleId}
    </if>


    order by to_number(USERINFO_UID) desc
  </select>

  <select id="login"  resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select USERINFO_UID, USERINFO_LOGINID, USERINFO_NAME, USERINFO_PASSWORD, USERINFO_SEX,
    USERINFO_EMAIL, USERINFO_MOBILE, USERINFO_STATUS, ROLE_ID
    from SYSTEM_USERINFO
    where USERINFO_LOGINID = #{userinfoLoginid} and USERINFO_PASSWORD=#{userinfoPassword}
  </select>

</mapper>